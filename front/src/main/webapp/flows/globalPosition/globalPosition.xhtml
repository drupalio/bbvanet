<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:bbvaGP="http://java.sun.com/jsf/composite/bbva/globalPosition"
	xmlns:bbvaSituation="http://java.sun.com/jsf/composite/bbva/graphics/situation"
	xmlns:bbvaAlert="http://java.sun.com/jsf/composite/bbva/alert"
	xmlns:bbvaBody="http://java.sun.com/jsf/composite/bbva/body"
	xmlns:bbvaContainer="http://java.sun.com/jsf/composite/bbva/container"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:bbvaButton="http://java.sun.com/jsf/composite/bbva/button"
	xmlns:bbvaInput="http://java.sun.com/jsf/composite/bbva/input"
	xmlns:c="http://java.sun.com/jstl/core">


<ui:composition template="../../templates/defaultLayout.xhtml">

	<f:metadata>
		<f:event listener="#{globalPositionController.preRender}" type="preRenderView" />
	</f:metadata>

	<c:forEach var="type" items="#{globalPositionController.totalsProducts.keySet()}">  
    	 <ui:param name="#{type}" value="#{type}"/>  
	</c:forEach>  

	<ui:define name="bodyTitle">
		<bbvaBody:title title="#{msg['title.positionGlobal']}" />
	</ui:define>

	<ui:define name="contentLeft">

		<c:set var="currency" value="$" />

		<bbvaContainer:productPanelBarGraphic
			title="#{msg['title.accountsPersonal']}">
			<div class="table-tabs">
				<bbvaGP:accountSearch listAccounts="#{customerProducts.accounts}"
					listAccountsAdquirencia="#{customerProducts.accounts}"
					listAccountsMore="#{customerProducts.accounts}" />
				<bbvaGP:accountHeadTable listAccounts="#{customerProducts.accounts}"
					controller="#{globalPositionController}" />
				
				<bbvaGP:accountAdquirenciaTable
					controller="#{globalPositionController}"
					listAccounts="#{customerProducts.adquirencia}" />
				 
				<bbvaGP:accountTailTable controller="#{globalPositionController}"
					listAccounts="#{customerProductsHidden.accounts}" />
			</div>
			<div class="row afterTable">
				<bbvaGP:productFooter
					listProduct="#{customerProductsHidden.accounts}" />
				<bbvaGP:totalBalance util="#{msg['text.accountant']}" 
					total="#{globalPositionController.totalsProducts['PC'].total}" 
					subtotal="#{globalPositionController.totalsProducts['PC'].available}" />
			</div>
		</bbvaContainer:productPanelBarGraphic>

		<bbvaContainer:productCardGraphic id="cardPieGP" title="#{msg['title.cards']}" 
				header="#{msg['graphic.tittle']}" pieGraphic="#{globalPositionController.graphicPieProducts}">

			<div class="table-tabs">
				<bbvaGP:cardHeadTable controller="#{globalPositionController}"
					listCards="#{customerProducts.creditCards}" />
				<bbvaGP:cardTailTable controller="#{globalPositionController}"
					listCards="#{customerProductsHidden.creditCards}" />
			</div>
			<div class="row afterTable">
				<bbvaGP:productFooter
					listProduct="#{customerProductsHidden.creditCards}" />
				<bbvaGP:totalBalance util="#{msg['text.used']}" 
					total="#{globalPositionController.totalsProducts['TDC'].total}" 
					subtotal="#{globalPositionController.totalsProducts['TDC'].available}"/>
			</div>
		</bbvaContainer:productCardGraphic>

		<bbvaContainer:productPanel title="#{msg['title.rotaryQuota']}">
			<div class="table-tabs">

				<bbvaGP:rotatingQuotaHeadTable
					controller="#{globalPositionController}"
					listQuota="#{customerProducts.rotatingAccounts}" />
				<bbvaGP:rotatingQuotaTailTable
					controller="#{globalPositionController}"
					listQuota="#{customerProductsHidden.rotatingAccounts}" />

			</div>
			<div class="row afterTable">
				<bbvaGP:productFooter
					listProduct="#{customerProductsHidden.rotatingAccounts}" />
				<bbvaGP:totalBalance 
					total="#{globalPositionController.totalsProducts['RQ'].total}" />
			</div>
		</bbvaContainer:productPanel>

		<bbvaContainer:productPanel title="#{msg['title.Leasing']}">
			<div class="table-tabs">
				<bbvaGP:leasingHeadTable controller="#{globalPositionController}"
					listLeasing="#{customerProducts.leasings}" />
				<bbvaGP:leasingTailTable controller="#{globalPositionController}"
					listLeasing="#{customerProductsHidden.leasings}" />
			</div>
			<div class="row afterTable">
				<bbvaGP:productFooter
					listProduct="#{customerProductsHidden.leasings}" />
				<bbvaGP:totalBalance 
					total="#{globalPositionController.totalsProducts['LI'].total}" />
			</div>
		</bbvaContainer:productPanel>

		<bbvaContainer:productPanel title="#{msg['title.loans']}">
			<div class="table-tabs">
				<bbvaGP:loanHeadTable controller="#{globalPositionController}"
					listLoan="#{customerProducts.loan}" />
				<bbvaGP:loanTailTable controller="#{globalPositionController}"
					listLoan="#{customerProductsHidden.loan}" />
			</div>
			<div class="row afterTable">
				<bbvaGP:productFooter listProduct="#{customerProductsHidden.loan}" />
				<bbvaGP:totalBalance 
					total="#{globalPositionController.totalsProducts['LO'].total}"/>
			</div>
		</bbvaContainer:productPanel>

		<bbvaContainer:productPanelLineGraphic
			title="#{msg['title.electronicDeposit']}">
			<div class="table-tabs">
				<bbvaGP:depositHeadTable controller="#{globalPositionController}"
					listDeposit="#{customerProducts.electronicDeposits}" />
				<bbvaGP:depositTailTable controller="#{globalPositionController}"
					listDeposit="#{customerProductsHidden.electronicDeposits}" />
			</div>
			<div class="row afterTable">
				<bbvaGP:productFooter
					listProduct="#{customerProductsHidden.electronicDeposits}" />
				<bbvaGP:totalBalance util="#{msg['text.accountant']}" 
					total="#{globalPositionController.totalsProducts['ED'].total}" 
					subtotal="#{globalPositionController.totalsProducts['ED'].available}" />
			</div>
		</bbvaContainer:productPanelLineGraphic>

		<bbvaContainer:productPanelGraphic id="fundsPieGP"
			title="#{msg['title.investmentFunds']}"
			header="#{msg['graphicFunds.tittle']}"
			pieGraphic="#{globalPositionController.graphicPieInvestmentFunds}">

			<div class="table-tabs">
				<bbvaGP:investmentFundHeadTable
					controller="#{globalPositionController}"
					listFund="#{customerProducts.funds}" />
				<bbvaGP:investmentFundTailTable
					controller="#{globalPositionController}"
					listFund="#{customerProductsHidden.funds}" />
			</div>
			<div class="row afterTable">
				<bbvaGP:productFooter listProduct="#{customerProductsHidden.funds}" />
				<bbvaGP:totalBalance total="#{globalPositionController.totalsProducts['SI'].total}" />
			</div>
		</bbvaContainer:productPanelGraphic>

	</ui:define>


	<ui:define name="contentRight">

		<bbvaSituation:globalSituationPanel />

	</ui:define>

</ui:composition>

</html>