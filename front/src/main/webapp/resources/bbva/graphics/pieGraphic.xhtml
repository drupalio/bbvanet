<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pm="http://primefaces.org/mobile"
	xmlns:c="http://java.sun.com/jstl/core">


<composite:interface>

	<composite:attribute name="pieConfigUI" />
</composite:interface>

<composite:implementation>


	<h:form>
		<span>#{cc.attrs.pieConfigUI.header}</span>
		<div class="chart-cheese" id="tu-situacion-grafico"
			data-highcharts-chart="3">
			<div id="chart" />
		</div>

	</h:form>



	<script>
		function initChart() {

			var totalColums = [];
			var label;
			var colums;
			var values;
			
			<c:forEach var="pieItemUI" items="${cc.attrs.pieConfigUI.pieItemUIList}">
				label = ("${pieItemUI.textLegend}");
				values = ("${pieItemUI.value}");
				colums = [ [ label ], [ values ] ];
				totalColums.push(colums);
			</c:forEach>

			var chart = c3.generate({

				data : {

					size : {
						height : 5,
						width : 5
					},

					columns : totalColums,

					type : 'pie',
					onclick : function(d, i) {
						console.log("onclick", d, i);
					},
					onmouseover : function(d, i) {
						console.log("onmouseover", d, i);
					},
					onmouseout : function(d, i) {
						console.log("onmouseout", d, i);
					}
				}
			});

		};
	</script>


</composite:implementation>
</html>